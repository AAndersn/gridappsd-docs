

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>GridAPPS-D Development Resources &mdash; GridAPPS-D 1.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="GridAPPS-D 1.0 documentation" href="../index.html"/>
        <link rel="next" title="Data Model" href="../data_model/index.html"/>
        <link rel="prev" title="Using GridAPPS-D" href="../using_gridappsd/index.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> GridAPPS-D
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview/index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installing_gridappsd/index.html">Installing GridAPPS-D</a></li>
<li class="toctree-l1"><a class="reference internal" href="../using_gridappsd/index.html">Using GridAPPS-D</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">GridAPPS-D Development Resources</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#developing-applications-using-gridapps-d">Developing Applications using GridAPPS-D</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#supported-application-types">Supported Application Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="#registering-application-with-platform">Registering Application With Platform</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#eclipse-ide-setup">Eclipse IDE Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="#execution-workflow">Execution Workflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="#messaging">Messaging</a></li>
<li class="toctree-l2"><a class="reference internal" href="#cim-documentation">CIM Documentation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#class-diagrams-for-the-profile">Class Diagrams for the Profile</a></li>
<li class="toctree-l3"><a class="reference internal" href="#typical-queries">Typical Queries</a></li>
<li class="toctree-l3"><a class="reference internal" href="#object-diagrams-for-queries">Object Diagrams for Queries</a></li>
<li class="toctree-l3"><a class="reference internal" href="#metering-relationship-to-loads-in-the-cim">Metering Relationship to Loads in the CIM</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cim-enhancements-for-rc2">CIM Enhancements for RC2</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cim-profile-in-cimtool">CIM Profile in CIMTool</a></li>
<li class="toctree-l3"><a class="reference internal" href="#creating-data-definition-language-ddl-for-mysql">Creating Data Definition Language (DDL) for MySQL</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#platform-uml-diagrams">Platform UML Diagrams</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#uml-from-the-functional-specification">UML from the Functional Specification</a></li>
<li class="toctree-l3"><a class="reference internal" href="#uml-for-release-cycle-1">UML for Release Cycle 1</a></li>
<li class="toctree-l3"><a class="reference internal" href="#initial-work-breakdown-for-release-cycle-1">Initial Work Breakdown for Release Cycle 1</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../data_model/index.html">Data Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hosted_applications/index.html">Integrated Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hosted_applications/index.html#state-estimator">State Estimator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hosted_applications/index.html#model-validator">Model Validator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hosted_applications/index.html#distribution-optimal-power-flow-for-real-time-setpoint-dispatch">Distribution Optimal Power Flow for Real-Time Setpoint Dispatch</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_docs/index.html">API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license/license.html">License</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">GridAPPS-D</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>GridAPPS-D Development Resources</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/developer_resources/index.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="gridapps-d-development-resources">
<h1>GridAPPS-D Development Resources<a class="headerlink" href="#gridapps-d-development-resources" title="Permalink to this headline">¶</a></h1>
<p>This section is useful for developers for understanding or changing platform’s internal workings and for those wishing to develop their own applications for GridAPPS-D.
For developing application for GridAPPS-D platform see <a class="reference internal" href="../using_gridappsd/index.html#using"><span class="std std-ref">Using GridAPPS-D</span></a> .</p>
<div class="section" id="developing-applications-using-gridapps-d">
<h2>Developing Applications using GridAPPS-D<a class="headerlink" href="#developing-applications-using-gridapps-d" title="Permalink to this headline">¶</a></h2>
<div class="section" id="supported-application-types">
<h3>Supported Application Types<a class="headerlink" href="#supported-application-types" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Python</li>
<li>Java (Jar)</li>
</ul>
</div>
<div class="section" id="registering-application-with-platform">
<h3>Registering Application With Platform<a class="headerlink" href="#registering-application-with-platform" title="Permalink to this headline">¶</a></h3>
<p>Assumptions: GOSS-GridAPPS-D repository (<a class="reference external" href="https://github.com/GRIDAPPSD/GOSS-GridAPPS-D.git">https://github.com/GRIDAPPSD/GOSS-GridAPPS-D.git</a>) is cloned under [ROOT_DIR]</p>
<ol class="arabic simple">
<li>Create a [app_name].config file in JSON format with keys and values as described below. where app_name should be unique for the application.</li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
        <span class="s2">&quot;id&quot;</span><span class="p">:</span><span class="s2">&quot;app_name&quot;</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span><span class="s2">&quot;This is desxription of the app&quot;</span><span class="p">,</span>
        <span class="s2">&quot;creator&quot;</span><span class="p">:</span><span class="s2">&quot;orgnization name&quot;</span><span class="p">,</span>
        <span class="s2">&quot;inputs&quot;</span><span class="p">:[</span><span class="s2">&quot;topic.goss.gridappsd.input1&quot;</span><span class="p">,</span> <span class="s2">&quot;topic.goss.gridappsd.input2&quot;</span><span class="p">,</span> <span class="o">..</span><span class="p">],</span>
        <span class="s2">&quot;outputs&quot;</span><span class="p">:[</span><span class="s2">&quot;topic.goss.gridappsd.output1&quot;</span><span class="p">,</span> <span class="s2">&quot;topic.goss.gridappsd.output2&quot;</span><span class="p">,</span> <span class="o">..</span><span class="p">],</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span><span class="s2">&quot;space saperated command line input options&quot;</span><span class="p">,</span>
        <span class="s2">&quot;execution_path&quot;</span><span class="p">:</span><span class="s2">&quot;absolute/execution/path&quot;</span><span class="p">,</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;PYTHON|JAVA&quot;</span><span class="p">,</span>
        <span class="s2">&quot;launch_on_startup&quot;</span><span class="p">:</span><span class="n">true</span><span class="o">|</span><span class="n">false</span><span class="p">,</span>
        <span class="s2">&quot;prereqs&quot;</span><span class="p">:[</span><span class="s2">&quot;other_app&quot;</span><span class="p">,</span><span class="s2">&quot;other_service&quot;</span><span class="p">,</span><span class="o">..</span><span class="p">],</span>
        <span class="s2">&quot;multiple_instances&quot;</span><span class="p">:</span><span class="n">true</span><span class="o">|</span><span class="n">false</span>
<span class="p">}</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li>Put [app_name].config file in applications folder under cloned repository location</li>
<li>Put your application under applications/[app_name] folder under cloned repository location as shown below.</li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">applications</span>
        <span class="p">[</span><span class="n">app_name</span><span class="p">]</span>
                <span class="n">app</span>
                        <span class="n">Your</span> <span class="n">application</span> <span class="n">goes</span> <span class="n">here</span>
                <span class="n">test</span>
                        <span class="n">Test</span> <span class="n">scripts</span> <span class="k">for</span> <span class="n">your</span> <span class="n">application</span> <span class="n">goes</span> <span class="n">here</span><span class="o">.</span>
</pre></div>
</div>
<p>See Using GridAPPSD section for details on starting a simulation from an application and communicating with plaform.
It also has an example in Python and Java to start a simulation.</p>
</div>
</div>
<div class="section" id="eclipse-ide-setup">
<h2>Eclipse IDE Setup<a class="headerlink" href="#eclipse-ide-setup" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li><dl class="first docutils">
<dt>Download or clone the repository from github</dt>
<dd><ol class="first last loweralpha">
<li>Install github desktop <a class="reference external" href="https://desktop.github.com/">https://desktop.github.com/</a> or sourcetree <a class="reference external" href="https://www.atlassian.com/software/sourcetree/overview">https://www.atlassian.com/software/sourcetree/overview</a> and Clone the GOSS-GridAPPS-D repository (<a class="reference external" href="https://github.com/GRIDAPPSD/GOSS-GridAPPS-D">https://github.com/GRIDAPPSD/GOSS-GridAPPS-D</a>)</li>
<li>Or download the source (<a class="reference external" href="https://github.com/GRIDAPPSD/GOSS-GridAPPS-D/archive/master.zip">https://github.com/GRIDAPPSD/GOSS-GridAPPS-D/archive/master.zip</a>)</li>
</ol>
</dd>
</dl>
</li>
<li>Install java 1.8 SDK and set JAVA_HOME variable</li>
<li>Install Eclipse <a class="reference external" href="http://www.eclipse.org/downloads/packages/release/Mars/1">http://www.eclipse.org/downloads/packages/release/Mars/1</a> (Mars 4.5.1 or earlier, 4.5.2 appears to have bugs related to bundle processing) TODO what about neon?</li>
<li>Open eclipse with workspace set to GOSS-GridAPPS-D download location, eg. C:UsersusernameDocumentsGOSS-GridAPPS-D</li>
<li>Install BNDTools plugin: Help-&gt;Install New Software-&gt;Work with: <a class="reference external" href="http://dl.bintray.com/bndtools/bndtools/3.0.0">http://dl.bintray.com/bndtools/bndtools/3.0.0</a> and Install Bndtools 3.0.0 or earlier</li>
<li><dl class="first docutils">
<dt>Import projects into workspace</dt>
<dd><ol class="first last loweralpha">
<li>File-&gt;Import General-&gt;Existing Projects into workspace</li>
<li>Select root directory, GOSS-GridAPPS-D download location</li>
<li>Select cnf, pnnl.goss.gridappsd</li>
</ol>
</dd>
</dl>
</li>
<li>If errors are detected, Right click on the pnnl.goss.gridappsd project and select release, then release all bundles</li>
<li><dl class="first docutils">
<dt>If you would like to you a local version of GOSS-Core (Optional)</dt>
<dd><ol class="first last loweralpha">
<li>Update cnf/ext/repositories.bnd</li>
<li>Select source view and add the following as the first line</li>
<li>aQute.bnd.deployer.repository.LocalIndexedRepo;name=GOSS Local Release;local=/GOSS-Core2/cnf/releaserepo;pretty=true,</li>
<li>verify by switching to bndtools and verify that there are packages under GOSS Local Relase</li>
</ol>
</dd>
</dl>
</li>
<li>Open pnnl.goss.gridappsd/bnd.bnd, Rebuild project, you should not have errors</li>
<li>Open pnnl.goss.gridappsd/run.bnd.bndrun and click Run OSGI</li>
</ol>
</div>
<div class="section" id="execution-workflow">
<h2>Execution Workflow<a class="headerlink" href="#execution-workflow" title="Permalink to this headline">¶</a></h2>
<img alt="../_images/RC1_workflow.png" src="../_images/RC1_workflow.png" />
<p>Process Manager - The workflow begins when a simulation request is sent to the request topic monitored by the Process Manager, the process manager gathers the necessary configurations from the Configuration Manager.  Then sends the configuration to the simulation manager to run the simulation.</p>
<p>Configuration Manager - The configuration manager parses the request and builds the necessary configuration files.  It also uses the data manager to pull the model data from the CIM database.</p>
<p>Data Manager - The data manager accesses the CIM database to build the model files used by the simulator.</p>
<p>Simulation Manager - The simulation manager launches the simulator and other required applications such as the FNCS bridge, FNCS, and the VoltVar application.  It is in charge of managing the timing of the simulation and reporting output from the simulation out to the simulation status topic.</p>
<p>FNCS Bridge - Serves as input and output from the simulator to the rest of GridAPPS-D, receives initialization, timestep, update, and finalize requests from the simulation manager and other applications, such as voltvar.  It also publishes output from the simulator on a pre-defined topic for the simulation manager and other applications to subscribe to.</p>
<p>Simulator - In this case GridLAB-D serves as the simulator.</p>
<p>Hosted Application - Applications can be developed to use the data generated by the simulation and submit feedback and updates to the simulator.  Two examples of this have been developed in RC1, the VoltVar application and a vizualization application</p>
<p>Log Manager - Process Manager recieves a log message. It retrieves the username associated with the message and forwards the message and username to Log Manager. Log Manager writes the message on a file and if store_to_db key is true in log message then log manager calls the data manager to store the log message in the database.</p>
</div>
<div class="section" id="messaging">
<h2>Messaging<a class="headerlink" href="#messaging" title="Permalink to this headline">¶</a></h2>
<p>Please see <span class="xref std std-ref">run_config</span> for more details.</p>
</div>
<div class="section" id="cim-documentation">
<h2>CIM Documentation<a class="headerlink" href="#cim-documentation" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound" id="cdpsm-rc1">
</div>
<p>This section summarizes the use of a reduced-order CIM <a class="footnote-reference" href="#id5" id="id1">[1]</a> to support
feeder modeling for the volt-var application in Release Cycle 1 (RC1).
The full CIM includes over 1100 tables in SQL, each one corresponding to
a UML class, enumeration or datatype. In RC1, we’re using approximately
100 such entities, mapped onto 100+ tables in SQL. Later versions of
GridAPPS-D will use a triple-store or graph database, both of which
appear to be better suited for CIM.</p>
<p>The CIM subset described here is based on the profile adopted for the
most recent distribution CIM interoperability test, which was held in
2011 at EDF. For GridAPPS-D, we have updated that profile for
compatibility with the most recent CIM base standard.</p>
<div class="section" id="class-diagrams-for-the-profile">
<h3>Class Diagrams for the Profile<a class="headerlink" href="#class-diagrams-for-the-profile" title="Permalink to this headline">¶</a></h3>
<p>Figure 1 through Figure 11 present the UML class diagrams generated from
Enterprise Architect <a class="footnote-reference" href="#id6" id="id2">[2]</a>. These diagrams provide an essential roadmap
for understanding:</p>
<ol class="arabic simple">
<li>How to ingest CIM XML from various sources into the database</li>
<li>How to generate native GridLAB-D input files from the database</li>
</ol>
<p>For those unfamiliar with UML class diagrams:</p>
<ol class="arabic simple">
<li>Lines with an arrowhead indicate class inheritance. For example, in
Figure 1, ACLineSegment inherits from Conductor, ConductingEquipment,
Equipment and then PowerSystemResource. ACLineSegment inherits all
attributes and associations from its ancestors (e.g. length), in
addition to its own attributes and ancestors.</li>
<li>Lines with a diamond indicate composition. For example, in Figure 1,
ConnectivityNodes make up a TopologicalNode, and then
TopologicalNodes make up a TopologicalIsland.</li>
<li>Lines without a terminating symbol are associations. For example, in
Figure 1, ACLineSegment has (through inheritance) a BaseVoltage,
Location and EquipmentContainer.</li>
<li>Italicized names at the top of each class indicate the ancestor (aka
superclass), in cases where the ancestor does not appear on the
diagram. For example, in Figure 1, PowerSystemResource inherits from
IdentifiedObject.</li>
</ol>
<p>Please see <em>OSPRREYS_RC1.eap</em> <a class="footnote-reference" href="#id7" id="id3">[3]</a> in the repository <a class="footnote-reference" href="#id8" id="id4">[4]</a> on GitHub
for the latest updates. The EnterpriseArchitect file includes a
description of each class, attribute and association. It can also
generate HTML documentation of the CIM, with more detail than provided
here.</p>
<p>The diagrammed UML associations have a role and cardinality at each end,
source and target. In practice, <em>only one end of each association</em> is
profiled and implemented in SQL. In some cases, the figure captions
indicate which end, but see the CIM profile for specific definitions, as
described in the object diagram section.</p>
<p>Nearly every CIM class inherits from IdentifiedObject, from which we use
two attributes:</p>
<ol class="arabic simple">
<li>mRID is the “master identifier” that must be unique and persistent
among all instances. It’s often used as the RDF resource identifier,
and is often a GUID.</li>
<li>Name is a human-readable identifier that need not be unique.</li>
</ol>
<p><img alt="image0" src="../_images/cim_NamingHierarchyPart1.png" /></p>
<p>Figure 1: Placement of ACLineSegment into a Line (aka Feeder). In
GridAPPS-D, the Line is the EquipmentContainer for all power system
components and the ConnectivityNodeContainer for all nodes. It also
corresponds to one TopologicalIsland. It’s part of a
SubGeographicalRegion and GeographicalRegion for proper context with
other CIM models. For visualization, ACLineSegment can be drawn from a
sequence of PositionPoints associated via Location. The Terminals are
free-standing; two of them will “reverse-associate” to the ACLineSegment
as ConductingEquipment, and each terminal also has one ConnectivityNode.
In RC1, we have a one-to-one association between ConnectityNode and
TopologicalNode. The AngleRefTopologicalNode association can be used to
identify the swing bus for GridLAB-D. Otherwise, we’re only using the
topology classes to facilitate state variables, as described in Figure
11. The Terminal:phases attribute is not used; instead, phases will be
defined in the ConductingEquipment instances. The associated
BaseVoltage:nominalVoltage attribute is important for many of the
classes that don’t have their own rated voltage attributes, for example,
EnergyConsumer.</p>
<p><img alt="image1" src="../_images/cim_LineModel.png" /></p>
<p>Figure 2: There are four different ways to specify ACLineSegment
impedances. In all cases, Conductor:length is required. The first way is
to specify the individual ACLineSegment attributes, which are sequence
impedances and admittances, leaving PerLengthImpedance null. The second
way is to specify the same attributes on an associated
PerLengthSequenceImpedance, in which case the ACLineSegment attributes
should be null. The third way is to associate a PerLengthPhaseImpedance,
leaving the ACLineSegment attributes null. Only conductorCount from 1 to
3 is supported, and there will be 1, 3 or 6 reverse-associated
PhaseImpedanceData instances that define the lower triangle of the Z and
Y matrices per unit length. The sequenceNumber goes from 1 to
N+N*(N-1)/2 in column order. The fourth way to specify impedance is by
wire/cable and spacing data, as described with Figure 10. If there are
ACLineSegmentPhase instances reverse-associated to the ACLineSegment,
then per-phase modeling applies. There are several use cases for
ACLineSegmentPhase: 1) single-phase or two-phase primary, 2) low-voltage
secondary using phases s1 and s2, 3) associated wire data where the
neutral exists, 4) associated wire data where the phase wires are
different. It is the application’s responsibility to propagate phasing
through terminals to other components, and to identify any miswiring.</p>
<p><img alt="image2" src="../_images/cim_LoadsAndSources.png" /></p>
<p>Figure 3: The EnergySource is balanced three-phase, representing a
transmission system source (this is probably not the way we’ll model
distributed generation in future versions). The EnergyConsumer is a ZIP
load, possibly unbalanced, with an associated LoadResponse instance
defining the ZIP coefficients. For three-phase delta loads, the
phaseConnection is D and the three reverse-associated
EnergyConsumerPhase instances will have phase=A for the AB load, phase=B
for the BC load and phase=C for the AC load. A three-phase wye load may
have either Y or Yn for the phaseConnection. Single-phase and two-phase
loads, including secondary loads, should have phaseConnection=I (for
individual).</p>
<p><img alt="image3" src="../_images/cim_SwitchingEquipment.png" /></p>
<p>Figure 4: There are seven different kinds of Switch supported in the
CIM, and all of them have zero impedance. They would all behave the same
in power flow analysis, and all would require many more attributes than
are defined in CIM to support protection analysis. The use cases for
SwitchPhase include 1) single-phase, two-phase and secondary switches,
2) one or two conductors open in a three-phase switch or 3)
transpositions, in which case phaseSide1 and phaseSide2 would be
different.</p>
<p><img alt="image4" src="../_images/cim_RegulatingEquipment.png" /></p>
<p>Figure 5: On the left, LinearShuntCompensator and
LinearShuntCompensatorPhase define capacitor banks, in a way very
similar to EnergyConsumer in Figure 3. The kVAR ratings must be
converted to susceptance based on the nominal voltage, nomU. Note that
aVRDelay is really a capacitor control parameter, to be used in
conjunction with RegulatingControl on the right-hand side. The
RegulatingControl associates to the controlled capacitor bank via
RegulatingCondEq, and to the monitored location via Terminal. There is
no support for a PT or CT ratio, so targetDeadband and targetValue have
to be in primary volts, amps, vars, etc.</p>
<p><img alt="image5" src="../_images/cim_Transformer.png" /></p>
<p>Figure 6: PowerTransformers may be modeled with or without tanks, and in
both cases vectorGroup should be specified according to IEC transformer
standards (e.g. Dy1 for many substation transformers). The case without
tanks is most suitable for balanced three-phase transformers that won’t
reference catalog data; any other case should use tank-level modeling.
In the tankless case, each winding will have a PowerTransformerEnd that
associates to both a Terminal and a BaseVoltage, and the parent
PowerTransformer. The impedance and admittance parameters are defined by
reverse-associated TransformerMeshImpedance between each pair of
windings, and a reverse-associated TransformerCoreAdmittance for one
winding. The units for these are ohms and siemens based on the winding
voltage, rather than per-unit. WindingConnection is similar to
PhaseShuntConnectionKind, adding Z and Zn for zig-zag connections and A
for autotranformers. If the transformer is unbalanced in any way, then
TransformerTankEnd is used instead of PowerTransformerEnd, and then one
or more TransformerTanks may be used in the parent PowerTransformer.
Some of the use cases are 1) center-tapped secondary, 2) open-delta and
3) EHV transformer banks. Tank-level modeling is also required is using
catalog data, as described with Figure 9.</p>
<p><img alt="image6" src="../_images/cim_TapChangerClass.png" /></p>
<p>Figure 7: A RatioTapChanger can represent a transformer tap changer on
the associated TransformerEnd. The RatioTapChanger has some parameters
defined in a direct-associated TapChangerControl, which inherits from
RegulatingControl some of the same attributes used in capacitor controls
(Figure 5). Therefore, a line voltage regulator in CIM includes a
PowerTransformer, a RatioTapChanger, and a TapChangerControl. The CT and
PT parameters of a voltage regulator can only be described via the
AssetInfo mechanism, described with Figure 8.</p>
<p><img alt="image7" src="../_images/cim_AssetsOverview.png" /></p>
<p>Figure 8: Many distribution software packages use the concept of catalog
data, aka library data, especially for lines and transformers. We use
the Asset and AssetInfo packages to implement this in CIM. Here, the
TapChangerInfo class includes the CT rating, CT ratio and PT ratio
parameters needed for line drop compensator settings in voltage
regulators. Catalog data is a one-to-many, and sometimes a many-to-many,
relationship. For these lookups, we create an Asset instance that has
one association to AssetInfo, and one-to-many associations to
PowerSystemResources. In this case, many TapChangers can share the same
TapChangerInfo data, which saves space and provides consistency.</p>
<p><img alt="image8" src="../_images/cim_DCIMTransformerInfo.png" /></p>
<p>Figure 9: The catalog mechanism for transformers will associate a
TransformerTank (Figure 6) with TransformerTankInfo (here), via the
one-to-many mechanism described in Figure 8. The PowerTransformerInfo
collects TransformerTankInfo by reverse association, but it does not
link with PowerTransformer. In other words, the physical tanks are
cataloged because transformer testing is done on tanks. One possible use
for PowerTransformerInfo is to help organize the catalog. It’s important
that TransformerEndInfo:endNumber (here) properly match the
TransformerEnd:endNumber (Figure 6). The shunt admittances are defined
by NoLoadTest on a winding / end, usually just one such test. The
impedances are defined by a set of ShortCircuitTests; one winding / end
will be energized, and one or more of the others will be grounded in
these tests.</p>
<p><img alt="image9" src="../_images/cim_DCIMWireInfo.png" /></p>
<p>Figure 10: The catalog / library mechanism for ACLineSegment will have a
WireSpacingInfo associated as in Figure 9. This will indicate whether
the line is overhead or underground. phaseWireCount and phaseWireSpacing
define optional bundling, so these will be 1 and 0 for distribution. The
number of phase and neutral conductors is actually defined by the number
of reverse-associated WirePosition instances. For example, a three-phase
line with neutral would have four of them, with phase = A, B, C and N.
On the right-hand side, concrete classes OverheadWireInfo,
TapeShieldCableInfo and ConcentricNeutralCableInfo may be associated (as
in Figure 9) to either ACLineSegment or ACLineSegmentPhase. The
association to ACLineSegment only applies for three-conductor,
three-phase lines all using the same wire data, or to supply just the
ratedCurrent attribute. All other use cases would associate to
ACLineSegmentPhase. It’s the application’s responsibility to calculate
impedances from this data. In particular, soil resistivity and
dielectric constants are not included in the CIM. Typical dielectric
constant values might be defined for each WireInsulationKind.</p>
<p><img alt="image10" src="../_images/cim_StateVariables.png" /></p>
<p>Figure 11: The CIM state variables package might be used to mimic sensor
locations and values on the distribution system. Voltages are measured
on TopologicalNodes, power flows are measured at Terminals, step
positions are measured on TapChangers, status is measured on
ConductingEquipment, and on/off state is measured on ShuntCompensators.
The “injections” have been included here, but there may not be a use
case for them in distribution. On the other hand, we would need an
SvCurrent, which was probably not included in the CIM because of its
transmission system heritage. Attributes for sensor characteristics
would also have to be added in future versions of GridAPPS-D.</p>
</div>
<div class="section" id="typical-queries">
<h3>Typical Queries<a class="headerlink" href="#typical-queries" title="Permalink to this headline">¶</a></h3>
<p>These queries focus on requirements of the first volt-var application.</p>
<ol class="arabic simple">
<li>Capacitors (Figure 5, Figure 12, Figure 13, Figure 14)<ol class="loweralpha">
<li>Create a list of capacitors with bus name (Connectivity Node in
Figure 1), kVAR per phase, control mode, target value and target
deadband</li>
<li>For a selected capacitor, update the control mode, target value,
and target deadband</li>
</ol>
</li>
<li>Regulators (Figure 7, Figure 8, Figure 12, Figure 29)<ol class="loweralpha">
<li>List all transformers that have a tap changer attached, along with
their bus names and kVA sizes</li>
<li>Given a transformer that has a tap changer attached, list or
update initialDelay, step, subsequentDelay, mode, targetDeadband,
targetValue, limitVoltage, lineDropCompensation, lineDropR,
lineDropX, reverseLineDropR and reverseLineDropX</li>
</ol>
</li>
<li>Transformers (Figure 6, Figure 9)<ol class="loweralpha">
<li>Given a bus name or load (Figure 3), find the transformer serving
it (Figure 16, Figure 19)</li>
<li>Find the substation transformer, defined as the largest
transformer (by kVA size and or highest voltage rating)</li>
<li>List the transformer catalog (Figure 9, Figure 20) with name,
highest ratedS, list of winding ratedU in descending order, vector
group (<a class="reference external" href="https://en.wikipedia.org/wiki/Vector_group">https://en.wikipedia.org/wiki/Vector_group</a> used with
connectionKind and phaseAngleClock), and percent impedance</li>
<li>List the same information as in item c, but for transformers
(Figure 6) and also retrieving their bus names. Note that a
transformer can be defined in three ways<ol class="lowerroman">
<li>Without tanks, for three-phase, multi-winding, balanced
transformers (Figure 16 and Figure 17).</li>
<li>With tanks along with TransformerTankInfo (Figure 9) from a
catalog of “transformer codes”, which may describe balanced
or unbalanced transformers. See Figure 19 and Figure 20.</li>
<li>With tanks for unbalanced transformers, and
TransformerTankInfo created on-the-fly. See Figure 19 and
Figure 20.</li>
</ol>
</li>
<li>Given a transformer (Figure 6), update it to use a different
catalog entry (TransformerTankInfo in Figure 9)</li>
</ol>
</li>
<li>Lines (Figure 2, Figure 10, Figure 12)<ol class="loweralpha">
<li>List the line and cable catalog entries that meet a minimum
ratedCurrent and specific WireUsageKind. For cables, be able to
specify tape shield vs. concentric neutral, the
WireInsulationKind, and a minimum insulationThickness. (Figure 27)</li>
<li>Given a line segment (Figure 2) update to use a different linecode
(Figure 10, Figure 26)</li>
<li>Given a bus name, list the ACLineSegments connected to the bus,
along with the length, total r, total x, and phases used. There
are four cases as noted in the caption of Figure 2, and see Figure
23 through Figure 26.</li>
<li>Given a bus name, list the set of ACLineSegments (or
PowerTransformers and Switches) completing a path from it back to
the EnergySource (Figure 3). Normally, the applications have to
build a graph structure in memory to do this, so it would be very
helpful if a graph/semantic database can do this.</li>
</ol>
</li>
<li>Voltage and other measurements (Figure 1, Figure 11)<ol class="loweralpha">
<li>Given a bus, attach a voltage measurement point (SvVoltage, Figure
30)</li>
<li>List all voltage measurement points and their buses, and for each
bus, list the phases actually present</li>
<li>For tap changer position (SvTapStep, Figure 31), attach and list
measurements as in items a and b</li>
<li>For capacitor switch status (SvShuntCompensatorSections, Figure
32), attach and list measurements as in items a and b</li>
</ol>
</li>
<li>Loads (Figure 3, Figure 28)<ol class="loweralpha">
<li>Given a bus name, list and total all of the loads connected by
phase, showing the total p and q, and the composite ZIP
coefficients</li>
</ol>
</li>
<li>Switching (Figure 4, Figure 22)<ol class="loweralpha">
<li>Given a bus name, trace back to the EnergySource and list the
switches encountered, grouped by type (i.e. the leaf class in
Figure 4). Also include the ratedCurrent, breakingCapacity if
applicable, and open/close status. If SwitchPhase is used, show
the phasing on each side and the open/close status of each phase.</li>
<li>Given switch, toggle its open/close status.</li>
</ol>
</li>
</ol>
</div>
<div class="section" id="object-diagrams-for-queries">
<h3>Object Diagrams for Queries<a class="headerlink" href="#object-diagrams-for-queries" title="Permalink to this headline">¶</a></h3>
<p>This section contains UML object diagrams for the purpose of
illustrating how to perform typical queries and updates. For those
unfamiliar with UML object diagrams:</p>
<ol class="arabic simple">
<li>Each object will be an instance of a class, and more than one
instance of a class can appear on the diagram. For example, Figure 12
shows two ConnectivityNode instances, one for each end of a
ConductingEquipment.</li>
<li>The object name (if specified and important) appears before the colon
(:) above the line, while the UML class appears after the colon.
Every object in CIM will have a unique ID, and a name (not
necessarily unique), even if not shown here.</li>
<li>Some objects may be shown with run-time state below the line. These
are attribute value assignments, drawn from those available in the
UML class or one of the class ancestors. The object may have more
attribute assignments, but only those directly relevant to the figure
captions are shown in the diagrams of this section.</li>
<li>Object associations are shown with solid lines, role names, and
multiplicities similar to the UML class diagrams. One important
difference is that only one way of navigating a particular
association will be defined in the profile. For example, the lower
left corner of Figure 1 shows a two-way link between TopologicalNode
and ConnectivityNode in the UML class diagram. However, Figure 12
shows that only one direction has been defined in the profile. Each
ConnectivityNode has a direct reference to its corresponding
TopologicalNode. In order to navigate the reverse direction from
TopologicalNode to ConnectivityNode, some type of conditional query
would be required. In other words, the object diagrams in this
section indicate which associations can actually be used in
GridAPPS-D.</li>
<li>In some cases, the multiplicities on the object diagrams are more
restrictive than on the class diagrams, due to profiling. For
example, Figure 12 reflects a one-to-one correspondence between
ConnectivityNode and TopologicalNode in this profile.</li>
</ol>
<p>The object diagrams are intended to help you break down the CIM queries
into common sub-tasks. For example, query #1 works with capacitors. It’s
always possible to select a capacitor (aka LinearShuntCompensator) by
name. In order to find the capacitor at a bus, say “bus1” in Figure 12,
one would retrieve all Terminals having a ConnectivityNode reference to
“bus1”. Each of those Terminals will have a ConductingEquipment
reference, and you want the Terminal(s) for which that reference is
actually a LinearShuntCompensator. In this CIM profile, only leaf
classes (e.g. LinearShuntCompensator) will be instantiated, never base
classes like ConductingEquipment. There can be more than one capacitor
at a bus, more than one load, more than one line, etc.</p>
<p><img alt="image11" src="../_images/cim_BusNavigation.png" /></p>
<p>Figure 12: In order to traverse buses and components, begin with a
ConnectivityNode (left). Collect all terminals referencing that
ConnectivityNode; each Terminal will have one-to-one association with
ConductingEquipment, of which there are many subclasses. In this
example, the ConductingEquipment has a second terminal referencing the
ConnectivityNode called bus2. There are applications for both
Depth-First Search (DFS) and Bread-First Search (BFS) traversals. Note
1: the Terminals have names, but these are not useful. Some Terminal
names have been shown above, just to illustrate there is no useful
implication of sequencing or ordering. Note 2: in this version of
GridAPPS-D, we have one-to-one association of TopologicalNode and
ConnectivityNode, but all searches should visit ConnectivityNodes. Note
3: transformers are subclasses of ConductingEquipment, but we traverse
connectivity via transformer ends (aka windings). This is illustrated
later.</p>
<p>In order to find capacitors (or anything else) associated with a
particular “feeder”, Figure 13 shows that you would query for objects
having EquipmentContainer reference to the feeder’s Line object. In
GridAPPS-D RC1, we only use Line for equipment container in CIM, and
this would correspond to one entire GridLAB-D model. There is also a
BaseVoltage reference that will have the system nominal voltage for the
capacitor’s location. However, in order to work with equipment ratings
you should use ratedS and ratedU attributes where they exist,
particularly for capacitors and transformers. These attributes are often
slightly different than the “system voltage”. Most of the attribute
units in CIM are SI, with a few exceptions like percent and kW values on
transformer test sheets (i.e. CIM represents the test sheet, not the
equipment).</p>
<p><img alt="image12" src="../_images/cim_ConductingEquipmentContexts.png" /></p>
<p>Figure 13: All conducting equipment lies within an EquipmentContainer,
which in GridAPPS-D, will be a Line object named after the feeder. It
also has reference to a BaseVoltage, which is typically one of the ANSI
preferred system voltages. Power transformers are a little different, in
that each winding (called “end” in CIM) has reference to a BaseVoltage.
Note that equipment ratings come from the vendor, and in this case
ratedU is slightly different from nominalVoltage. All conducting
equipment has a Location, which contains XY coordinates (see Figure 1).
The Location is useful for visualization, but is not essential for a
power flow model.</p>
<p>Completing the discussion of capacitors, Figure 14 provides two examples
for single-phase, and three-phase with local voltage control. As shunt
elements, capacitors have only one Terminal instance. Loads and sources
have one terminal, lines and switches have two terminals, and
transformers have two or more terminals. Examples of all those are shown
later. In Figure 14, the capacitor’s kVAR rating will be based on its
nameplate ratedU, not the system’s nominalVoltage.</p>
<p>Often, the question will arise “what phases exist at this bus?”. There
is no phasing explicitly associated with a ConnectivityNode or Terminal
in CIM. To answer this question, we’d have to query for all
ConductingEquipment instances having Terminals connected to that bus, as
in Figure 12. The types of ConductingEquipment that may have individual
phases include LinearShuntCompensators (Figure 14), ACLineSegments,
PowerTransformers (via TransformerEnds), EnergyConsumers, and
descendants of Switch. If the ConductingEquipment has such individual
phases, then add those phases to list of phases existing at the bus. If
there are no individual phases, then ABC all exist at the bus. Note this
doesn’t guarantee that all wiring to the bus is correct; for example,
you could still have a three-phase load served by only a two-phase line,
which would be a modeling error. In Figure 14, we’d find phase C at
Bus611 and phases ABC at Bus675. Elsewhere in the model, there should be
ACLineSegments, PowerTransformers or Switch descendants delivering phase
C to Bus611, all three phases ABC to Bus675.</p>
<p><img alt="image13" src="../_images/cim_Capacitors.png" /></p>
<p>Figure 14: Capacitors are called LinearShuntCompensator in CIM. On the
left, a 100 kVAR, 2400 V single-phase bank is shown on phase C at bus
611. bPerSection = 100e3 / 2400^2 [S], and the bPerSection on
LinearShuntCompensatorPhase predominates; these values can differ among
phases if there is more than one phase present. On the right, a balanced
three-phase capacitor is shown at bus 675, rated 300 kVAR and 4160 V
line-to-line. We know it’s balanced three phase from the absence of
associated LinearShuntCompensatorPhase objects. bPerSection = 300e4 /
4160^2 [S]. This three-phase bank has a voltage controller attached with
2400 V setpoint and 240 V deadband, meaning the capacitor switches ON if
the voltage drops below 2280 V and OFF if the voltage rises above 2520
V. These voltages have to be monitored line-to-neutral in CIM, with no
VT ratio. In this case, the control monitors the same Terminal that the
capacitor is connected to, but a different conducting equipment’s
Terminal could be used. The control delay is called aVRDelay in CIM, and
it’s an attribute of the LinearShuntCompensator instead of the
RegulatingControl. It corresponds to “dwell time” in GridLAB-D.</p>
<p>Figure 15 through Figure 20 illustrate the transformer query tasks, plus
Figure 29 for attached voltage regulators. The autotransformer example
is rated 500/345/13.8 kV and 500/500/50 MVA, for a transmission system.
The short circuit test values are Z<sub>HL</sub>=10%, Z<sub>HT</sub>=25%
and Z<sub>LT</sub>=30%. The no-load test values are 0.05% exciting
current and 0.025% no-load losses. These convert to r, x, g and b in SI
units, from and , where S<sub>rated</sub> and U<sub>rated</sub> are based on
the “from” winding (aka end). The same base quantities would be used to
convert r, x, g and b back to per-unit or percent. The open wye – open
delta impedances are already represented in percent or kW, from the test
reports.</p>
<p><img alt="image14" src="../_images/cim_Autotransformer.png" /></p>
<p>Figure 15: Autotransformer with delta tertiary winding acts like a
wye-wye transformer with smaller delta tertiary. The vector group would
be Yynd1 or Yyd1. For analyses other than power flow, it can be
represented more accurately as the physical series (n1) – common (n2)
connection, with a vector group Yand1. In either case, it’s a
three-winding transformer.</p>
<p><img alt="image15" src="../_images/cim_PowerTransformerNavigation.png" /></p>
<p>Figure 16: A three-winding autotransformer is represented in CIM as a
PowerTransformer with three PowerTransformerEnds, because it’s balanced
and three-phase. The three Terminals have direct ConductingEquipment
references to the PowerTransformer, so you can find it from bus1, busX
or busY. However, each PowerTransformerEnd has a back-reference to the
same Terminal, and it’s own reference to BaseVoltage (Figure 13); that’s
how you link the matching buses and windings, which must have compatible
voltages. Terminals have no sequence number, so the endNumber is
important for correct linkage to catalog data as discussed later. By
convention, ends with highest ratedU have the lowest endNumber, and
endNumber establishes that end’s place in the vectorGroup.</p>
<p><img alt="image16" src="../_images/cim_PowerTransformerImpedance.png" /></p>
<p>Figure 17: Power transformer impedances correspond to the three-winding
autotransformer example of Figure 15 and Figure 16. There are three
instances of TransformerMeshImpedance connected pair-wise between the
three windings / ends. The x and r values are in Ohms referred to the
end with highest ratedU in that pair. There is just one
TransformerCoreAdmittance, usually attached to the end with lowest
ratedU, and the attribute values are Siemens referred to that end’s
ratedU.</p>
<p><img alt="image17" src="../_images/cim_OpenWyeOpenDelta.png" /></p>
<p>Figure 18: Open wye - open delta transformer banks are used to provide
inexpensive three-phase service to loads, by using only two single-phase
transformers. This is an unbalanced transformer, and as such it requires
tank modeling in CIM. Physically, the two transformers would be in
separate tanks. Note that Tank A is similar to the residential
center-tapped secondary transformer, except the CIM phases would include
s1 and s2 instead of A and B.</p>
<p><img alt="image18" src="../_images/cim_TankNavigation.png" /></p>
<p>Figure 19: Unbalanced PowerTransformer instances comprise one or more
TransformerTanks, which own the TransformerTankEnds. Through the ends,
busHi collects phases ABN and busLo collects phases ABCN. Typically,
phase C will also exist at busHi, but this transformer doesn’t require
it. We still assign vectorGroup Yd1 to the supervising PowerTransformer,
as this is the typical case. The modeler should determine that. By
comparison to Figure 19, there is a possible ambiguity in how endA3
represents the polarity dot at the neutral end of Wdg A3. An earlier CIM
proposal would have assigned phaseAngleClock = 6 on endA3, but the
attribute was removed from TransformerTankEnd. It may not be possible to
infer the correct winding polarities from the vectorGroup in all cases.
There is a phaseAngleClock attribute on TransformerTankEndInfo, but that
represents a shelf state of the tank, not necessarily connections in the
field. Therefore, it may be necessary to propose the phaseAngleClock
attribute for TransformerTankEnd.</p>
<p><img alt="image19" src="../_images/cim_TankImpedance.png" /></p>
<p>Figure 20: This Asset catalog example defines the impedances for Tank B
of the open wye – open delta bank. This is a 50 kVA, 7200 / 240 V
single-phase transformer. It has 1% exciting current and 0.4 kW loss in
the no-load test, plus 2.1% reactance and 0.5 kW loss in the
short-circuit test. A multi-winding transformer could have more than one
grounded end in a short-circuit test, but this is not common. The
catalog data is linked with one or more TransformerTanks via the Asset
instance, shown to the left. This Asset instance won’t exist without
such links (i.e. the catalog data is actually used), so cardinalities
are 1 for AssetInfo and 1..* for PowerSystemResources. Furthermore,
endNumber on the TransformerEndInfo has to match endNumber on the
TransformerTankEnd instances associated to Tank B. Instead of catalog
information, we could have used mesh impedance and core admittance as in
Figure 17, but we’d have to convert the test sheets to SI units and we
could not share data with other TransformerTank instances, both of which
are inconvenient.</p>
<p>Figure 21 through Figure 27 illustrate the query tasks for
ACLineSegments and Switches, which will define most of the circuit’s
connectivity. The example sequence impedances were based on Z<sub>1</sub>
= 0.1 + j0.8 Ω/mile and Z<sub>0</sub> = 0.5 + j2.0 Ω /mile. For
distribution systems, use of the shared catalog data is more common,
either pre-calculated matrix (Figure 25) or spacing and conductor
(Figure 26 and Figure 27). In both cases, impedance calculation is
outside the scope of CIM (e.g. GridLAB-D internally calculates line
impedance from spacing and conductor data).</p>
<p><img alt="image20" src="../_images/cim_LinePhaseNavigation.png" /></p>
<p>Figure 21: An ACLineSegment with two phases, A and C. If there are no
ACLineSegmentPhase instances that associate to it, assume it’s a
three-phase ACLineSegment. This adds phases AC to bus671 and bus684.</p>
<p><img alt="image21" src="../_images/cim_SwitchPhaseNavigation.png" /></p>
<p>Figure 22: This 50-Amp load break switch connects phases AC between
busLeft and busRight. Without associated SwitchPhase instances, it would
be a three-phase switch. This switch also transposes the phases; A on
side 1 connects with C on side 2, while C on side 1 connects with A on
side 2. This is the only way of transposing phases in CIM. Note the
ambiguity in side 1 and side 2, because Terminal.sequenceNumber was
subsequently removed from the CIM. This needs to be addressed in a
future version of the CIM. Also note that LoadBreakSwitch has the open
attribute inherited from Switch, while SwitchPhase has the converse
closed attribute. In order to open and close the switch, these
attributes would be toggled appropriately. See Figure 4 for other types
of switch.</p>
<p><img alt="image22" src="../_images/cim_LineInstance.png" /></p>
<p>Figure 23: This is a balanced three-phase ACLineSegment between bus632
and bus671, 2000 feet or 609.6 m long. Sequence impedances are specified
in ohms, as attributes on the ACLineSegment. This is a typical pattern
for transmission lines, but not distribution lines.</p>
<p><img alt="image23" src="../_images/cim_LineSequence.png" /></p>
<p>Figure 24: The impedances from Figure 23 were divided by 609.6 m, to
obtain ohms per meter for seqCat1. Utilities often call this a “line
code”, and other ACLineSegment instances can share the same
PerLengthImpedance. A model imported into the CIM could have many line
codes, not all of them used in that particular model. However, those
line codes should be available for updates by reassigning
PerLengthImpedance.</p>
<p><img alt="image24" src="../_images/cim_LineMatrix.png" /></p>
<p>Figure 25: This is a two-phase line segment from bus671 to bus684 using
a line code, which has been specified using a 2x2 symmetric matrix of
phase impedances per meter, instead of sequence impedances per meter.
This is more common for distribution than either Figure 23 or Figure 24.
It’s distinguished from Figure 24 by the fact that PerLengthImpedance
references an instance of PerLengthPhaseImpedance, not
PerLengthSequenceImpedance. The conductorCount attribute tells us it’s a
2x2 matrix, which will have two unique diagonal elements and one
distinct off-diagonal element. The elements are provided in three
PhaseImpedanceData instances, which are named here for clarity as Z11,
Z12 and Z22. However, the sequenceNumber is most significant, as the
elements must be numbered in lower triangular form. Finally, note that
Z11 and Z22 are slightly different. The matrix row numbers must
correspond to the phases present in ABC order. CIM doesn’t provide a way
of transposing matrix row assignments, so in order to swap phases A and
C, we’d have to create a second instance of PerLengthPhaseImpedance,
with Z11 and Z22 swapped. The GridAPPS-D CIM importer will create these
automatically, which expands the set of line codes. As presented here,
mtx604 can apply to phasing AB, BC or AC.</p>
<p><img alt="image25" src="../_images/cim_LineAssetInfo.png" /></p>
<p>Figure 26: The two-phase ACLineSegment impedance defined by sharing wire
and spacing data from a catalog. Each ACLineSegmentPhase links to an
OverheadWireInfo instance via the Asset instance. If the neutral (N) is
present, we have to specify its wire information for a correct impedance
calculation. In this case, ACN all use the same wire type, but they can
be different, especially for the neutral. Similarly, the WireSpacingInfo
associates to the ACLineSegment itself via a separate Asset instance.
These Asset instances only exist when the catalog data is used, so
cardinalities are 1 for AssetInfo and 1..* for PowerSystemResources.</p>
<p><img alt="image26" src="../_images/cim_LineCatalog.png" /></p>
<p>Figure 27: The upper five instances define catalog attributes for Figure
26. The WirePosition xCoord and yCoord units are meters, not feet, and
they include explicit phase assignments to match ACLineSegmentPhase.
This removes any ambiguity, but it’s still necessary to create copies
for phase transposition. The phaseWireSpacing and phaseWireCount
attributes are for sub-conductor bundling on EHV and UHV transmission
lines; bundling is not used on distribution. The number of WirePositions
that reference spc505acn determine how many wires need to be assigned,
and the phase attributes in those WirePosition instances determine how
many phases and neutrals there are. Eliminating the neutral, this would
produce a 2x2 phase impedance matrix. Although the pattern appears
general enough to support multiple neutrals and transmission overbuild,
the CIM doesn’t actually have the required phasing codes. When isCable
is true, the WirePosition yCoord values would be negative for
underground depth. To find overhead wires of a certain size or ampacity,
we can put query conditions on the ratedCurrent attribute. To find
underground conductors, we query the ConcentricNeutralCableInfo or
TapeShieldCableInfo instead of OverheadWireInfo. All three inherit the
ratedCurrent attribute from WireInfo. Cables don’t have a voltage rating
in CIM, but you can use insulationThickness as a proxy for voltage
rating in queries. Here, 5.588 mm corresponds to 220 mils, which is a
common size for distribution.</p>
<p>Figure 28 illustrates the loads, which are called EnergyConsumer in CIM.
The houses and appliances from GridLAB-D are not supported in CIM. Only
ZIP loads can be represented. Further, any load schedules would have to
be defined outside of CIM. Assume that the CIM loads are peak values.</p>
<p>Figure 29 illustrates the voltage regulator function. Note that
GridLAB-D combines the regulator and transformer functions, while CIM
separates them. Also, the CIM provides voltage and current transducer
ratios for tap changer controls, but not for capacitor controls.</p>
<p>Figure 30 through Figure 32 illustrate how measurements required for RC1
can be attached to buses or other components. Individual phase
measurements for voltage and capacitor status have to be added.</p>
<p><img alt="image27" src="../_images/cim_Loads.png" /></p>
<p>Figure 28: The three-phase load (aka EnergyConsumer) on bus671 is
balanced and connected in delta. It has no ratedU attribute, so use the
referenced BaseVoltage (Figure 13) if a voltage level is required. On
the right, a three-phase wye-connected unbalanced load on bus675 is
indicated by the presence of three EnergyConsumerPhase instances
referencing UnbalancedLoad. For consistency in searches and
visualization, UnbalancedLoad.pfixed should be the sum of the three
phase values, and likewise for UnbalancedLoad.qfixed. In power flow
solutions, the individual phase values would be used. Both loads share
the same LoadResponse instance, which defines a constant power
characteristic for both P and Q, because the percentages for constant
impedance and constant current are all zero. The two other most commonly
used LoadResponseCharacteristics have 100% constant current, and 100%
constant impedance. Any combination can be used, and the units don’t
have to be percent (i.e. use a summation to determine the denominator
for normalization).</p>
<p><img alt="image28" src="../_images/cim_TapChanger.png" /></p>
<p>Figure 29: In CIM, the voltage regulator function is separated from the
tap-changing transformer. The IEEE 13-bus system has a bank of three
independent single-phase regulators at busRG60, and this example shows a
RatioTapChanger attached to the regulator on phase A, represented by the
TransformerTankEnd having phases=A or phases=AN. See Figure 19 for a
more complete picture of TransformerTankEnds, or Figure 16 for a more
complete picture of PowerTransformerEnds. Either one can be the
TransformerEnd in this figure, but with a PowerTransformerEnd, all three
phase taps would change in unison (i.e. they are “ganged”). Most
regulator attributes of interest are found in RatioTapChanger or
TapChangerControl instances. However, we need the Asset mechanism to
specify ctRatio, ptRatio and ctRating values. These are inherent to the
equipment, whereas the attributes of RatioTapChanger and
TapChangerControl are all settings per instance. For the IEEE 13-bus
example, there would be separate RatioTapChanger and TapChangerControl
instances for phases B and C.</p>
<p><img alt="image29" src="../_images/cim_VoltageMeasurements.png" /></p>
<p>Figure 30: In CIM, the voltage measurement attaches to TopologicalNode,
which we can find from the ConnectivityNode in GridAPPS-D. Positive
sequence or phase A measurement is implied, so we must add a phase
attribute on SvVoltage for GridAPPS-D. Physically, a voltage sensor is
more closely associated with a Terminal or ConnectivityNode.</p>
<p><img alt="image30" src="../_images/cim_TapMeasurements.png" /></p>
<p>Figure 31: SvTapStep links to a TransformerEnd indirectly, through the
RatioTapChanger. There is no phasing ambiguity because
TransformerTankEnd has its phases attribute, while PowerTransformerEnd
always includes ABC. Units for SvTapStep.position are per-unit.</p>
<p><img alt="image31" src="../_images/cim_CapacitorMeasurement.png" /></p>
<p>Figure 32: The on/off measurement for a capacitor bank attaches directly
to LinearShuntCompensator, but there is no phasing support. That needs
to be proposed as a CIM extension.</p>
</div>
<div class="section" id="metering-relationship-to-loads-in-the-cim">
<h3>Metering Relationship to Loads in the CIM<a class="headerlink" href="#metering-relationship-to-loads-in-the-cim" title="Permalink to this headline">¶</a></h3>
<p>These UML class relationships in Figure 33 through Figure 35 have not
been planned for implementation in RC1, but in a future version of
GridAPPS-D, they can be used to link automated meter readings with loads
in the distribution system model.</p>
<p><img alt="image32" src="../_images/cim_DCIMLoadModel.png" /></p>
<p>Figure 33: Energy Consumers are associated to Metering Usage Points</p>
<p><img alt="image33" src="../_images/cim_MeteringUsagePoints.png" /></p>
<p>Figure 34: Metering Usage Points have one or more EndDevices (i.e.
Meters)</p>
<p><img alt="image34" src="../_images/cim_MeteringEndDevices.png" /></p>
<p>Figure 35: EndDevices associate to meter readings, functions and
channels.</p>
</div>
<div class="section" id="cim-enhancements-for-rc2">
<h3>CIM Enhancements for RC2<a class="headerlink" href="#cim-enhancements-for-rc2" title="Permalink to this headline">¶</a></h3>
<p>Possible CIM enhancements to support volt-var feeder modeling:</p>
<ol class="arabic simple">
<li>Different on and off delay parameters for RegulatingControl (Figure
5)</li>
<li>Phase modeling for EnergySource (Figure 3)</li>
<li>Current ratings for PerLengthImpedance (Figure 2). At present, some
users rely on associated WireInfo, ignoring all attributes except
currentRating.</li>
<li>Transducers for RegulatingControl (Figure 5)</li>
<li>Dielectric constant and soil resistivity (Figure 10)</li>
<li>Current flow and switch open/closed measurements (Figure 11)</li>
<li>Individual phase measurements for voltage and capacitor state (Figure
11)</li>
<li>Clock angles for TransformerTankEnd (i.e. move phaseAngleClock from
PowerTransformerEnd to TransformerEnd (Figure 6)</li>
<li>Clarify side1 and side2 for switch phase modeling (Figure 4)</li>
</ol>
</div>
<div class="section" id="cim-profile-in-cimtool">
<h3>CIM Profile in CIMTool<a class="headerlink" href="#cim-profile-in-cimtool" title="Permalink to this headline">¶</a></h3>
<p>CIMTool was used to develop and test the profile for RC1, because it:</p>
<ol class="arabic simple">
<li>Generates SQL for the MySQL database definition</li>
<li>Validates instance files against the profile</li>
</ol>
<p>The CIMTool developer will not be able to support the tool in future, so
eventually we will use the new Schema Composer feature in Enterprise
Architect.</p>
<p>In order to view the profile, import the archived Eclipse project
<em>OSPRREYS_CIMTOOL.zip</em> into CIMTool. Please see the CIM tutorial slides
provided by Margaret Goodrich for user instructions.</p>
<p>Four instance files were validated against the profile in CIMTool. In
order to generate them, we use a current version of OpenDSS with the
<em>Export CDPSMcombined</em> command on four IEEE test feeders that come with
OpenDSS:</p>
<ol class="arabic simple">
<li><strong>~/src/opendss/Test/IEEE13_CDPSM.dss</strong> is the IEEE 13-bus test
feeder with per-length phase impedance matrices and a delta tertiary
added to the substation transformer.</li>
<li><strong>~/src/opendss/Test/IEEE13_Assets.dss</strong> is the IEEE 13-bus test
feeder with catalog data for overhead lines, cables and transformers.
Capacitor controls have also been added.</li>
<li><strong>~/src/opendss/Distrib/IEEETestCases/8500-Node/Master.dss</strong> is the
IEEE 8500-node test feeder with balanced secondary loads.</li>
<li><strong>~/src/opendss/Distrib/IEEETestCases/8500-Node/Master-unbal.dss</strong> is
the IEEE 8500-node test feeder with unbalanced secondary loads.</li>
</ol>
<p>Either the 3<sup>rd</sup> or 4<sup>th</sup> feeder will be used for the
volt-var application. The 1<sup>st</sup> and 2<sup>nd</sup> feeders are used
to validate more parts of the CIM profile used in RC1. In all four
cases, CIMTool reports only two kinds of validation error:</p>
<ol class="arabic simple">
<li><strong>Isolated connectivity node</strong>: CIMTool expects two or more Terminals
per ConnectivityNode, but dead ended feeder segments will have only
one on the last node. This is not really an error, at least for
distribution systems.</li>
<li><strong>Minimum cardinality</strong>: For TapChangerControl instances, the
inherited RegulatingControl.RegulatingCondEq association is not
specified. This is not really an error, as the association is only
needed for shunt capacitor controls. Figure 36 shows that
RegulatingCondEq was not selected for TapChangerControl in the
profile, so this may reflect a defect in the validation code. Efforts
to circumvent it were not successful.</li>
</ol>
<p>With these caveats, the profile and instances validate against each
other, for feeder models that solve in OpenDSS.</p>
<p><img alt="image35" src="../_images/cim_CIMTool.png" /></p>
<p>Figure 36: Profiling TapChangerControl in CIMTool; the inherited
RegulatingCondEq is not included.</p>
</div>
<div class="section" id="creating-data-definition-language-ddl-for-mysql">
<h3>Creating Data Definition Language (DDL) for MySQL<a class="headerlink" href="#creating-data-definition-language-ddl-for-mysql" title="Permalink to this headline">¶</a></h3>
<p>As shown at the top of Figure 36, CIMTool builds <em>RC1.sql</em> to create
tables in a relational database, but the syntax doesn’t match that
required for MySQL. The following manual edits were made:</p>
<ol class="arabic">
<li><p class="first">Globally change <strong>CHAR VARYING(30)</strong> to <strong>varchar(50)</strong> with a blank
space pre-pended before the varchar</p>
</li>
<li><p class="first">Globally change <strong>“</strong> to <strong>`</strong></p>
</li>
<li><p class="first">In foreign keys to enumerations, change the referenced attribute
from <strong>mRID</strong> to <strong>name</strong></p>
</li>
<li><p class="first">In foreign keys to <strong>EquipmentContainer</strong> or
<strong>ConnectivityNodeContainer</strong>, change the referenced table to
<strong>Line</strong></p>
</li>
<li><p class="first">In foreign keys to <strong>ShuntCompensator</strong>, change the referenced table
to <strong>LinearShuntCompensator</strong></p>
</li>
<li><p class="first">In foreign keys to <strong>TapChanger</strong>, change the referenced table to
<strong>RatioTapChanger</strong>.</p>
</li>
<li><p class="first">The CIM UML incorporates several polymorphic associations, which
can’t be implemented directly in SQL. Base parent class tables were
added for:</p>
<ol class="loweralpha simple">
<li><strong>AssetInfo</strong>, which can be referenced via the Parent attribute
from ConcentricNeutralCableInfo, TapeShieldCableInfo,
OverheadWireInfo, WireSpacingInfo, TapChangerInfo and
TransformerTankInfo</li>
<li><strong>TransformerEnd</strong>, which can be referenced via the Parent
attribute from PowerTransformerEnd and TransformerTankEnd</li>
<li><strong>PerLengthImpedance</strong>, which can be referenced via the Parent
attribute from PerLengthSequenceImpedance and
PerLengthPhaseImpedance</li>
<li><strong>Switch</strong>, which can be referenced via the SwtParent attribute
from Breaker, Fuse, Sectionaliser, Recloser, Disconnector, Jumper
and LoadBreakSwitch.</li>
<li><strong>ConductingEquipment</strong>, which can be referenced via the Parent
attribute from ACLineSegment, EnergySource, EnergyConsumer,
LinearShuntCompensator, PowerTransformer, and all of the Switch
types.</li>
</ol>
</li>
<li><p class="first">The catalog data mechanism in Figure 8 required two new tables, one
for polymorphic associations and another for many-to-many joins:</p>
<ol class="loweralpha simple">
<li><strong>PowerSystemResource</strong>, which can be referenced via the PSR
attribute from ACLineSegment, ACLineSegmentPhase, RatioTapChanger
and TransformerTank.</li>
<li><strong>AssetInfoJoin</strong>, which references AssetInfo and
PowerSystemResource. This table actually supplants the Asset
class in Figure 8.</li>
</ol>
</li>
<li><p class="first">The ShortCircuitTest in Figure 9 has a one-to-many association to
TransformerEndEnfo, and we need to implement the many side by
adding:</p>
<ol class="loweralpha simple">
<li><strong>GroundedEndJoin</strong>, which references TransformerEndInfo and
ShortCircuitTest.</li>
</ol>
</li>
<li><p class="first">The ToTransformerEnd association in Figure 6 is one-to-many, so
CIMTool did not export it to SQL. Rather than create a join table, a
ToTransformerEnd attribute was added to TransformerMeshImpedance.
This supports only one-to-one association, which is justified
because the one-to-many case is very rare, and GridLAB-D cannot
model transformers having the one-to-many association. This
restriction may be removed in future versions having a semantic or
graph database.</p>
<p>Except for the first two items, all of these adjustments arose from
the absence of inheritance or polymorphism in SQL. These adjustments
will make the updates, queries and views more complicated. However,
they allow referential integrity to be enforced, which is one of the
most important reasons to use SQL and relational databases. Other
types of data store could be a more natural fit to the CIM UML, but
they may not have the performance of a relational database.</p>
<p>In GitHub:</p>
</li>
</ol>
<ol class="arabic simple">
<li><em>RC1.sql</em> is the manually adjusted SQL export from CIMTool</li>
<li><em>LoadRC1.sql</em> will <strong>re-create the GridAPPS-D database in MySQL</strong>,
incorporate <em>RC1.sql</em>, and finally document the foreign keys. It
should run without error.</li>
</ol>
<table class="docutils footnote" frame="void" id="id5" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td>See <a class="reference external" href="http://cimug.ucaiug.org/default.aspx">http://cimug.ucaiug.org/default.aspx</a> and the EPRI CIM Primer at:
<a class="reference external" href="http://www.epri.com/abstracts/Pages/ProductAbstract.aspx?ProductId=000000003002006001">http://www.epri.com/abstracts/Pages/ProductAbstract.aspx?ProductId=000000003002006001</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id6" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id2">[2]</a></td><td>Suggest “Corporate Edition” from <a class="reference external" href="http://www.sparxsystems.com/">http://www.sparxsystems.com/</a> for
working with CIM UML. The free CIMTool is still available at
<a class="reference external" href="http://wiki.cimtool.org/index.h">http://wiki.cimtool.org/index.h</a> tml, but support is being phased out.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id7" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id3">[3]</a></td><td>OSPRREYS is an older name for GridAPPS-D</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id8" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id4">[4]</a></td><td><a class="reference external" href="https://github.com/GRIDAPPSD/Powergrid-Models/CIM">https://github.com/GRIDAPPSD/Powergrid-Models/CIM</a></td></tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="platform-uml-diagrams">
<h2>Platform UML Diagrams<a class="headerlink" href="#platform-uml-diagrams" title="Permalink to this headline">¶</a></h2>
<div class="section" id="uml-from-the-functional-specification">
<span id="uml-diagrams-label"></span><h3>UML from the Functional Specification<a class="headerlink" href="#uml-from-the-functional-specification" title="Permalink to this headline">¶</a></h3>
<p>This section presents a selection of GridAPPS-D domain (class) diagrams
to supplement the <em>OSPRREYS Functional Specification</em> document. The
purpose is to enhance understanding of the functional specification, by
providing graphical walkthroughs of some important use cases. The reader
should be familiar with definitions in the functional specification, and
with Universal Modeling Language (UML) diagrams.</p>
<p>GridAPPS-D is organized as a suite of internal function managers, twelve
of them composing the Platform Manager as shown in Figure 1. All
GridAPPS-D functions and interactions are mediated by one (or more) of
these function managers. When running, the GridAPPS-D 413 Platform
Manager will be composed of one (and only one) of each internal manager
numbered 401 – 412. These internal managers work together to accomplish
various GridAPPS-D functions.</p>
<p><img alt="uml_image0" src="../_images/uml_Platform.png" /></p>
<p>Figure 1: Composition of the GridAPPS-D Platform Manager</p>
<p>Within each class block, some top-level attributes are listed with (-)
signs in the middle division, and some top-level methods are listed with
(+) signs in the lower division. For example, we already know that 401
Distribution Co-Simulator will need component simulators (i.e.
attributes) for buildings (open-source EnergyPlus), communications
(open-source ns-3), and the electric power distribution grid
(open-source GridLAB-D running in a real-time mode). It will also need
at least one method that runs the suite of simulators in a mode
emulating continuous real-time operation. Taking another example, 407
Service Manager also contains an attribute for GridLAB-D to provide
power flow calculations, but run as a service to applications.</p>
<p>As the design evolves, classes in Figure 1 will acquire many more
attributes and methods. The attributes themselves may reference
complicated classes and data structures. Therefore, the UML model will
expand each class into layer and sub-layer diagrams to more clearly show
these evolving details. We can still use the top-level diagrams to make
sure that the major components are in place for the important use cases.</p>
<p>Figure 2 illustrates the case of a user executing an application, in the
role of EF7 from the functional specification. We initially focused on
volt-var optimization (VVO), and then added a more complicated demand
response (DR) application that fits the same basic pattern. As a
prerequisite, some entity has provided both applications to GridAPPS-D
for registration and hosting, in a process detailed later. For now, we
assume the application(s) have been installed and will focus first on
running VVO.</p>
<p><img alt="uml_image1" src="../_images/uml_VVO.png" /></p>
<p>Figure 2: Executing an application</p>
<p>All user interaction with GridAPPS-D occurs through a command interface,
numbered 202 when the user writes commands to GridAPPS-D, and numbered
102 when the user gets data from GridAPPS-D. To run VVO, the user will
issue 203 Model Configuration Setup and 204 Simulation Configuration
Setup to GridAPPS-D, which then delegates the commands to various
internal function managers (see Figure 1). The 203 Setup will probably
extract the feeder model of interest, set load and weather data, etc.
The 204 Setup will probably tell 401 to run GridLAB-D for a certain time
period, but not to run ns-3 or EnergyPlus. The exact composition of 203
and 204 Setups will be determined later in the design process. In a
process described later, internal functions 405 (Simulation Control
Manager) and 406 (Power System Model Manager) will transform 201, 203
and 204 into 305 and 306, which 401 can then read and run from directly.</p>
<p>When it runs, 401 will generate streams of data that mimic real-time
operation of the system, and these streams pass to the other parts of
GridAPPS-D as 301 Real-time Simulation Data. Some of the data streams
may also output to the user as 101 Real-time Simulation Data. The 310
VVO Application can act on this data to make decisions (e.g. switch
capacitor banks, change regulator taps, change solar inverter settings).
In this process, 310 VVO could invoke power flow calculations in
GridLAB-D via 407 Service Manager, but this is different from the way
401 Co-Simulator runs. The application may use 407 services to explore
alternatives or run contingency analysis, which could change the power
system model, but the 401 real-time simulations always take priority and
always use the “real” model.</p>
<p>When we considered adding the second and more complicated application,
310 DR, the structure of Figure 2 didn’t change very much. The
open-headed diamond symbols indicate that GridAPPS-D can host several
applications, which is UML aggregation. These applications may interact
via the GridAPPS-D command interface, if the applications and their
command sets have been designed for it. For example, the DR application
may use VVO to check and mitigate voltage limits.</p>
<p>A DR application is more likely than VVO to need EnergyPlus and ns-3 in
the co-simulation. In response, we added those attributes to 401, and
will add supporting attributes to 201, 203 and 204 as the design
evolves. It should also be recognized that more sophisticated VVO
applications might incorporate communications (ns-3) if available.</p>
<p>Figure 3 depicts the process of managing power system models, including
the schema and repository within 201 Distribution System Model. Because
it’s based on standards (e.g. IEC 61968) and open-source tools (e.g.
MySQL), the model can be created and maintained from outside GridAPPS-D,
directly by EF 21, the Model Manager. This is shown at the top of Figure
3. This process is out of GridAPPS-D scope but within project scope, and
it can leverage existing tools like Cimphony, Cimdesk, EA, etc.</p>
<p>For use by and within GridAPPS-D, all model configuration commands will
pass from EF21 through the command interface to function 406, the Power
System Model Manager. This function reads the base power system model
data from 201, and configures it into a three-phase load flow model for
solution in 106/306. The Distribution Co-Simulator uses 306, but the
user might want 106 for off-line use. Working with 404 Data Manager, the
406 Power System Model Manager may also write additional data (i.e. not
used in the load flow calculation) to 104/304. In this case, the 102
Model Output function will collect that data from both 104 and 106 for
reporting to the user, EF7, via the command interface. Note that the
base data, in 201, is not modified through this process. Instead, the
base data is treated as input to GridAPPS-D.</p>
<p><img alt="uml_image2" src="../_images/uml_ModelManagement.png" /></p>
<p>Figure 3: Internal model management</p>
<p>Figure 4 shows the internal Platform Manager flow when running
application tests. Compared to the case of normal usage in Figure 2,
this example shows additional control and output for testing. The test
commands include 203 and 204, as in Figure 2, but they also include:</p>
<ul class="simple">
<li>205 Test Scripts, for the sequence of steps to perform</li>
<li>206 Test Configuration Setup, including initial conditions, etc.</li>
<li>207 Expected Results, for comparison to the actual output</li>
<li>210 Application Metadata, for information to run and instrument the
application</li>
</ul>
<p>The 403 Test Manager orchestrates the steps to run the application and
collect results. As part of 103 Test Results, it will compare the
real-time data (101/301) to the expected results in 207. If the testing
user, EF8, requested logging, then the 409 Log Manager will create
109/309 System Logs for collection by 403 Test Manager. Logging is
optional, and should have been requested as part of the 206 Test Config
Setup or 204 Model Config Setup (this is not spelled out in the
functional specification).</p>
<p><img alt="uml_image3" src="../_images/uml_Testing.png" /></p>
<p>Figure 4: Testing an application or the platform</p>
<p>Figure 5 shows some of the internal 413 Platform Manager detail when a
user, EF7, runs an application in debugging mode. Compared to Figure 2,
there is much more internal output. The 212 Debug Configuration will
include such things as breakpoints, watch variables, and logging
requests. When run in debug mode, the 408 Debug Manager will collect the
internal inputs and intermediate results from a variety of GridAPPS-D
modules, including the simulator, services in use, model data, and
access violations. The 404 Data Manager mediates most of this data
collection (and with a change to the specification it could also mediate
101/301). The 408 Debug Manager combines this into 108 Intermediate
Results, with 109 System Logs, for output to the user via the command
interface. Depending on the implementation of GridAPPS-D, interactive
debugging may also be supported, but is not shown in Figure 5.</p>
<p><img alt="uml_image4" src="../_images/uml_Debugging.png" /></p>
<p>Figure 5: Debugging an application</p>
<p>Figure 6 shows the process of registering or updating an application to
use with GridAPPS-D. The developer, in the role of EF13, must provide
the application itself (211) along with the application data schema
(208) and metadata (210). The data schema includes input and output
parameters. The metadata includes a user-friendly name, description,
calling parameters, command syntax, API functions used, etc. Using this
information, 410 Application Hosting Manager will install and register
the application, and its data, with 407 Service Manager and 404 Data
Manager. After completing these steps, 412 Version Manager will output
the current version information via the command interface; the current
version includes information about which applications are installed
along with the application versions.</p>
<p>In order to perform application management, EF13 also needs to provide
user credentials to be checked against the 209 Access Control List. If
these credentials are valid, the 411 SAC Manager will create 311 Access
Permission Verification for all of the internal Platform Manager
components. In Figure 6, the 410 Application Hosting Manager can pass
311 to 404, 407 and 412 as needed. Although not shown earlier, SAC is
actually incorporated into all GridAPPS-D processes this way.</p>
<p><img alt="uml_image5" src="../_images/uml_Hosting.png" /></p>
<p>Figure 6: Hosting an application</p>
</div>
<div class="section" id="uml-for-release-cycle-1">
<span id="rc1-diagrams-label"></span><h3>UML for Release Cycle 1<a class="headerlink" href="#uml-for-release-cycle-1" title="Permalink to this headline">¶</a></h3>
<p>Our objective is to demonstrate useful functionality, which is
standards-compliant, by the end of March 2017. A simple heuristic VVO
application will be running in GridAPPS-D. In terms of the Functional
Requirements, we will be implementing:</p>
<ul class="simple">
<li>102/202 Command Interface</li>
<li>301 Real-time Simulation Data</li>
<li>310 Hosted Application, but short-cutting the registration process</li>
<li>401 Distribution Co-Simulator (partial)</li>
<li>402 Process Manager (partial)</li>
<li>404 Data Manager (partial)</li>
<li>405 Simulation Manager (partial)</li>
<li>406 Power System Model Manager (partial)</li>
<li>413 Platform Manager (encapsulating 401 and 403-406)</li>
</ul>
<p>This represents five out of twelve Internal Functions from the
Functional Requirements, in partial form. The deadline leaves four
months for detailed design and implementation, plus two months for
documentation and testing. Therefore, we have chosen a minimal set of
functions that can show end-to-end use of GridAPPS-D at the first
milestone.</p>
<p>In developing the work breakdown structure (WBS), we noted that
real-time simulation data is published with no time lags or errors in
Release 1. However, data flow in a real DMS is affected by sensor and
communication system performance, and also by the action of other
subsystems. In Release 2, this might be addressed through some
combination of:</p>
<ul class="simple">
<li>Communication and sensor models in the Distribution Co-Simulator</li>
<li>Adding MDM and SCADA service attributes to the 407 Service Manager</li>
<li>Filters on 301 Real-time Simulation Data</li>
</ul>
<p>These decisions, and many others affecting Release 2 and Release 3, can
be deferred until we gain experience developing Release 1.</p>
<p>Figure 1 shows the software components planned for Release 1. Most of
these correspond to internal functions from the Functional Requirements,
with some relatively minor re-factoring. The Power System Model Manager
functionality has been split. The data store management and the creation
of a complete GridLAB-D model appear at the bottom. Once the simulator
is running, incremental changes are posted to the messaging bus.</p>
<p>Most of the “pink” components in Figure 1 are assigned to one task,
except:</p>
<ul class="simple">
<li>The 310 VVO is a sub-task of the Command Interface, due to the close
coupling of those efforts. The team on this task needs both power
system and software skills.</li>
<li>A separate task has been added for some project-level items.</li>
</ul>
<p><img alt="rc1_tasks_image0" src="../_images/uml_DomainObjects.png" /></p>
<p>Figure 1: Component Diagram for GridAPPS-D Release 1</p>
</div>
<div class="section" id="initial-work-breakdown-for-release-cycle-1">
<h3>Initial Work Breakdown for Release Cycle 1<a class="headerlink" href="#initial-work-breakdown-for-release-cycle-1" title="Permalink to this headline">¶</a></h3>
<p>The Release 1 work breaks down into seven tasks, listed below. Three
<strong>critical items must be completed first</strong>; these are highlighted in
red. There are other inter-task dependencies that have not yet been
called out. We plan to sequence the work over eight two-week “sprints”
within the four months allocated for detailed design and development,
using an agile process (Kanban).</p>
<ol class="arabic simple">
<li>Project-level Elements<ol class="loweralpha">
<li><strong>Identify a power system model (note: IEEE-13 is already in
CIM/CDPSM)</strong></li>
<li>Design data store schema</li>
<li>Manually ingest power system models</li>
</ol>
</li>
<li>Command Interface<ol class="loweralpha">
<li>Design APIs<ol class="lowerroman">
<li>For all configurations in Task 4</li>
<li>For power system control actions (e.g. open/close switch)</li>
</ol>
</li>
<li><strong>Select one language binding</strong> (e.g. Python, Java, C++, MATLAB)
and implement</li>
<li>Develop a heuristic volt-var application (VVO) in the bound
language</li>
<li>Integrate VVO into GridAPPS-D</li>
</ol>
</li>
<li>Messaging and Data Manager<ol class="loweralpha">
<li><strong>Select a messaging framework (eg. ZeroMQ)</strong></li>
<li>Create communication APIs</li>
<li>Receives real-time data from simulator</li>
<li>Receives power system control actions</li>
<li>Handle communication between GridAPPS-D managers</li>
<li>Log messages to file</li>
</ol>
</li>
<li>Configuration Manager (both Power System Config &amp; Simulation Config)<ol class="loweralpha">
<li>Receive configurations from command interface over message bus</li>
<li>Translate configurations to native GridLAB-D</li>
<li>Translate and publish incremental update messages</li>
<li>Send configurations to Process Manager for simulation start</li>
</ol>
</li>
<li>Process Manager<ol class="loweralpha">
<li>Receives configurations from the Configuration Manager</li>
<li>Send configuration to the Distribution Co-Simulator</li>
<li>Start Co-Simulation Process</li>
<li>Create simulation data channels and inform application</li>
<li>Stop simulation process</li>
</ol>
</li>
<li>Distribution Co-Simulator (wraps GridLAB-D)<ol class="loweralpha">
<li>Accepts configurations from Process Manager</li>
<li>Start simulation</li>
<li>Produce and publish data in real time</li>
<li>Accept changes in real time (e.g. capacitor switching) via message
bus</li>
</ol>
</li>
<li>Power System Model Manager<ol class="loweralpha">
<li>Access the power system model in data store</li>
<li>Create native GridLAB-D file for initial loading into the
simulator</li>
</ol>
</li>
</ol>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../data_model/index.html" class="btn btn-neutral float-right" title="Data Model" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../using_gridappsd/index.html" class="btn btn-neutral" title="Using GridAPPS-D" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Battelle Memorial Institute All rights reserved..

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>